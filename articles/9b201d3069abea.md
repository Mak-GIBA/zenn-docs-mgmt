---
title: "ç¶ºéº—ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã®Tips ~ãƒ«ãƒ¼ãƒ—ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®å˜ç´”åŒ–~"
emoji: "ğŸ’¡"
type: "tech"
topics:
  - "python"
  - "python3"
  - "å¤‰æ•°"
  - "ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‰"
  - "ã‚¹ã‚³ãƒ¼ãƒ—"
published: true
published_at: "2024-05-30 23:59"
---

# ã‚³ãƒ¼ãƒ‰ã®æµã‚Œã‚’èª­ã¿ã‚„ã™ãã™ã‚‹
## æ¯”è¼ƒã®é †ç•ªã‚’é©åˆ‡ã«ã™ã‚‹
æ¯”è¼ƒæ–‡ã‚’æ›¸ãæ™‚ã¯ï¼Œå¤‰åŒ–ã™ã‚‹å€¤ã‚’å·¦ã«ï¼Œ**å®šæ•°ã®ã‚ˆã†ãªã‚ˆã‚Šå®‰å®šã—ãŸå€¤ã‚’å³ã«é…ç½®ã™ã‚‹(length>10)**
## if/elseãƒ–ãƒ­ãƒƒã‚¯ã®ä¸¦ã³ã‚’é©åˆ‡ã«ã™ã‚‹
if/elseãƒ–ãƒ­ãƒƒã‚¯ã¯é©åˆ‡ãªä¸¦ã³ã«ã™ã‚‹ã€‚å…·ä½“çš„ã«ã¯**è‚¯å®šç³»ãƒ»å˜ç´”ãƒ»ç›®ç«‹ã¤ã‚‚ã®ã‚’å…ˆã«å‡¦ç†ã™ã‚‹**ã€‚
ã€€ã“ã‚Œã‚‰ã®å„ªå…ˆé †ã¯ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚ä¾‹ãˆã°ï¼Œå¦å®šå½¢ã®æ¡ä»¶ã§ã‚ã£ã¦ã‚‚å˜ç´”ã§é–¢å¿ƒã‚„æ³¨æ„ã‚’å¼•ãå ´åˆã‚‚ã‚ã‚‹ãŸã‚ï¼Œãã†ã„ã†å ´é¢ã§ã¯ãã‚Œã‚’å…ˆã«å‡¦ç†ã™ã‚‹
## æ·±ã„ãƒã‚¹ãƒˆã®å›é¿
æ·±ã„ãƒã‚¹ãƒˆã¯ã§ãã‚‹ã ã‘é¿ã‘ã‚‹ï¼Œä¾‹ãˆã°ï¼Œæ—©ãè¿”ã‚Šå€¤(return)ã‚’è¿”ã™ã‚ˆã†ã«ã™ã‚‹ãƒ»ã€Œã‚¬ãƒ¼ãƒ‰ç¯€(é–¢æ•°ã®ä¸Šéƒ¨ã§å˜ç´”ãªæ¡ä»¶ã‚’å‡¦ç†ã™ã‚‹ã‚‚ã®)ã€ãŒä¾¿åˆ©ã€‚
```python
def divide(a, b):
    # ã‚¬ãƒ¼ãƒ‰ç¯€ã®ä¾‹
    if b == 0:
        raise ValueError("Division by zero is not allowed")
    if a == 0:
        return 0
    # æ­£å¸¸ãªå‡¦ç†
    return a / b

print(divide(10, 2))  # å‡ºåŠ›: 5.0
print(divide(0, 2))   # å‡ºåŠ›: 0
print(divide(10, 0))  # å‡ºåŠ›: ValueError: Division by zero is not allowed
```
ã¾ãŸï¼Œãƒ«ãƒ¼ãƒ—ä¸­ã§"æ—©ã‚ã«è¿”ã‚Šå€¤ã‚’è¿”ã™"ã¨åŒã˜ã‚ˆã†ãªã“ã¨ã‚’è¡Œã†ã«ã¯**continueã‚’ä½¿ã†**ã€‚ä¸€æ–¹ï¼Œcontinueã¯åˆ†ã‹ã‚Šã«ãããªã‚‹ã“ã¨ã‚‚å¤šã„ã€‚ã“ã‚Œã¯ï¼Œãƒ«ãƒ¼ãƒ—ã‚’è¡Œã£ãŸã‚Šæ¥ãŸã‚Šã—ã¦ç¢ºèªã—ãªã‘ã‚Œã°ã„ã‘ãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€‚ã ã‹ã‚‰ï¼Œè¤‡æ•°ã«ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒ—ã«ãŠã„ã¦continueã‚’ä½¿ã†éš›ã¯æ³¨æ„ãŒå¿…è¦ã€‚
```python
def process_numbers(numbers):
    result = []
    for number in numbers:
        # ã‚¬ãƒ¼ãƒ‰ç¯€
        if number < 0:
            continue  # è² ã®æ•°ã¯ã‚¹ã‚­ãƒƒãƒ—
        result.append(number * 2)
    return result

numbers = [10, -5, 3, -2, 7, -1, 8]
processed_numbers = process_numbers(numbers)

print(processed_numbers)  # å‡ºåŠ›: [20, 6, 14, 16]
```

# å·¨å¤§ãªå¼ã‚’åˆ†å‰²ã—ã¦åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹

## èª¬æ˜å¤‰æ•°ã‚’ä½¿ã†
å¤§ããªå¼ã«ã¯ï¼Œãã®å€¤ã‚’ä¿æŒã™ã‚‹ã€Œèª¬æ˜å¤‰æ•°ã€ã‚’ä½¿ã†ã€‚ã“ã®ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦ï¼Œç°¡å˜ãªåå‰ã§å¼ã‚’è¡¨ã™ã“ã¨ã§ã‚³ãƒ¼ãƒ‰ã‚’æ–‡æ›¸åŒ–ã§ãã‚‹ï¼Œã‚³ãƒ¼ãƒ‰ã®ä¸»è¦ãªæ¦‚å¿µã‚’èª­ã¿æ‰‹ãŒèªè­˜ã—ã‚„ã™ãã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
- Before:
```python
def is_eligible_for_discount(age, is_student, has_membership, total_purchase):
    if age < 18 or age > 65 or is_student or has_membership and total_purchase > 100:
        return True
    return False

age = 20
is_student = False
has_membership = True
total_purchase = 150

print(is_eligible_for_discount(age, is_student, has_membership, total_purchase))  # å‡ºåŠ›: True
```
- After:
```python
def is_eligible_for_discount(age, is_student, has_membership, total_purchase):
    is_underage = age < 18
    is_senior = age > 65
    is_qualified_student = is_student
    has_large_purchase_with_membership = has_membership and total_purchase > 100
    
    if is_underage or is_senior or is_qualified_student or has_large_purchase_with_membership:
        return True
    return False
    
    age = 20
    is_student = False
    has_membership = True
    total_purchase = 150
    
    print(is_eligible_for_discount(age, is_student, has_membership, total_purchase))  # å‡ºåŠ›: True
```
## æ¡ä»¶å¼ã‚’ç†è§£ã—ã‚„ã™ãã™ã‚‹
ãƒ‰ãƒ»ãƒ¢ãƒ«ã‚¬ãƒ³ã®æ³•å‰‡ã‚’ä½¿ã£ã¦æ¡ä»¶å¼ã¯ã§ãã‚‹ã ã‘ç†è§£ã—ã‚„ã™ãã™ã‚‹ï¼ˆä¾‹: notã‚’åˆ†é…ã—ã¦and/orã‚’åè»¢ã™ã‚‹ï¼‰
- Before:
```python
def is_neither_true(a, b):
    return not (a or b)

a = False
b = False
print(is_neither_true(a, b))  # å‡ºåŠ›: True
```
- After:
```python
def is_neither_true(a, b):
    return not a and not b

a = False
b = False
print(is_neither_true(a, b))  # å‡ºåŠ›: True
```

# å¤‰æ•°ã¨èª­ã¿ã‚„ã™ã•
## ä¸è¦ãªå¤‰æ•°ã®å‰Šé™¤
ã§ãã‚‹ã ã‘é‚ªé­”ãªå¤‰æ•°ã‚’å‰Šé™¤ã™ã‚‹ã€‚ä¾‹ãˆã°ï¼Œä¸­é–“çµæœã‚’ä¿æŒã—ã¦ã„ã‚‹å¤‰æ•°ã‚„åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼å¤‰æ•°ã¯ã§ãã‚‹ã ã‘å‰Šé™¤ã™ã‚‹ã€‚
- Before:
```python
def find_value_bad(lst, target):
    # åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼å¤‰æ•°
    found = False
    for item in lst:
        if item == target:
            found = True
            break

    if found:
        return f"{target} was found in the list."
    else:
        return f"{target} was not found in the list."

# ä½¿ç”¨ä¾‹
lst = [1, 2, 3, 4, 5]
target = 3
print(find_value_bad(lst, target))

target = 6
print(find_value_bad(lst, target))

```
- After:
```python
def find_value_good(lst, target):
    #åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼å¤‰æ•°ãŒãªã„å½¢ã§åŒæ§˜ã®å‡¦ç†ã‚’å®Ÿè£…
    if target in lst:
        return f"{target} was found in the list."
    else:
        return f"{target} was not found in the list."

# ä½¿ç”¨ä¾‹
lst = [1, 2, 3, 4, 5]
target = 3
print(find_value_good(lst, target))

target = 6
print(find_value_good(lst, target))

```
## å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯å°ã•ãã™ã‚‹
å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯ã§ãã‚‹ã ã‘å°ã•ãã™ã‚‹ã€‚ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¯ã©ã“ã§ã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã‚‹ã®ã‹ã‚’è¿½è·¡ã™ã‚‹ã®ãŒé›£ã—ã„ä¸”ã¤ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¨conflictã™ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã€‚
- Before:
```python
class DataProcessorBad:
    def __init__(self, data):
        self.data = data
        self.result = None

    def preprocess_data(self):
        # self.data ã‚’åŠ å·¥ã™ã‚‹
        self.data = [x * 2 for x in self.data]

    def compute_result(self):
        # self.data ã«åŸºã¥ã„ã¦çµæœã‚’è¨ˆç®—ã™ã‚‹
        self.result = sum(self.data) / len(self.data)

    def get_result(self):
        # è¨ˆç®—ã•ã‚ŒãŸçµæœã‚’è¿”ã™
        return self.result

# ä½¿ç”¨ä¾‹
data = [1, 2, 3, 4, 5]
processor_bad = DataProcessorBad(data)
processor_bad.preprocess_data()
processor_bad.compute_result()
print(processor_bad.get_result())

```
- After:
```python
class DataProcessorGood:
    def __init__(self, data):
        self.data = data

    def preprocess_data(self, data):
        # ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•° data ã‚’åŠ å·¥ã™ã‚‹
        return [x * 2 for x in data]

    def compute_result(self, data):
        # ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•° data ã«åŸºã¥ã„ã¦çµæœã‚’è¨ˆç®—ã™ã‚‹
        return sum(data) / len(data)

    def process(self):
        # å…¨ä½“ã®å‡¦ç†ã‚’ã¾ã¨ã‚ã‚‹
        processed_data = self.preprocess_data(self.data)
        result = self.compute_result(processed_data)
        return result

# ä½¿ç”¨ä¾‹
data = [1, 2, 3, 4, 5]
processor_good = DataProcessorGood(data)
print(processor_good.process())
```
## å¤‰æ•°ã®å®šç¾©ä½ç½®ã‚’ä¸‹ã’ã‚‹
å¤‰æ•°ãŒã‚³ãƒ¼ãƒ‰ä¸Šéƒ¨ã§è¤‡æ•°å®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ï¼Œå®šç¾©ä½ç½®ã‚’ä¸‹ã’ã‚‹ã€‚è¤‡æ•°ã®å¤‰æ•°ãŒæœ€åˆã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ï¼Œå…¨å¤‰æ•°ã‚’åˆ‡ã‚Šæ›¿ãˆã¦è€ƒãˆãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚èªçŸ¥è² è·ãŒé«˜ããªã‚‹ã€‚
- Before:
```python
def process_data(data):
    result = None
    processed_data = []

    # ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†
    for value in data:
        processed_data.append(value * 2)

    # çµæœã®è¨ˆç®—
    total = sum(processed_data)
    count = len(processed_data)
    if count > 0:
        result = total / count

    return result

# ä½¿ç”¨ä¾‹
data = [1, 2, 3, 4, 5]
print(process_data(data))

```
- After:
```python
def process_data(data):
    # ãƒ‡ãƒ¼ã‚¿ã®å‰å‡¦ç†
    processed_data = [value * 2 for value in data]

    # çµæœã®è¨ˆç®—
    if processed_data:
        total = sum(processed_data)
        count = len(processed_data)
        result = total / count
    else:
        result = None

    return result

# ä½¿ç”¨ä¾‹
data = [1, 2, 3, 4, 5]
print(process_data(data))

```
## ä¸€åº¦ã ã‘æ›¸ãè¾¼ã‚€å¤‰æ•°ã‚’ä½¿ã†
ä¸€åº¦ã ã‘æ›¸ãè¾¼ã‚€å¤‰æ•°ã‚’ä½¿ã†ã€‚å¤‰æ•°ãŒçµ¶ãˆãšå¤‰æ›´ã•ã‚Œç¶šã‘ã‚‹ã¨å€¤ã‚’è¿½è·¡ã™ã‚‹é›£æ˜“åº¦ãŒæ ¼æ®µã«ä¸ŠãŒã‚‹ã€‚ãã®ãŸã‚ï¼ŒåŒã˜å¤‰æ•°ãŒè¤‡æ•°å€‹æ‰€ã§æ›¸ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã«ã¯ï¼Œãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’æ¤œè¨ã™ã‚‹ã€‚
ã€€ã¾ãŸï¼Œæ›¸ãæ›ãˆã‚’é˜²ããŸã‚ã«å¤‰æ•°ã¯ã§ãã‚‹ã ã‘**ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«**ã«ã™ã‚‹ã¨è‰¯ã„ã€‚pythonã§å¤‰æ•°ã‚’ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã«ã™ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ä»¥ä¸‹ã€‚
 
### ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªçµ„ã¿è¾¼ã¿ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä½¿ç”¨ã™ã‚‹



1. **æ•°å€¤å‹ï¼ˆint, float, complexï¼‰**
```python
x = 42
y = 3.14
z = 1 + 2j
```



3. **æ–‡å­—åˆ—å‹ï¼ˆstrï¼‰**
```python
s = "immutable string"
```



4. **ã‚¿ãƒ—ãƒ«ï¼ˆtupleï¼‰**
```python
t = (1, 2, 3)
```



5. **frozenset**
```python
f = frozenset([1, 2, 3])
```



### `namedtuple` ã‚’ä½¿ã†



`collections.namedtuple`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ï¼Œã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç°¡å˜ã«ä½œæˆã§ãã‚‹ã€‚



```python
from collections import namedtuple

Point = namedtuple('Point', ['x', 'y'])
p = Point(1, 2)
# p.x = 3Â  # AttributeError: can't set attribute
```



### ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã§ `frozen=True` ã‚’ä½¿ã†



Python 3.7ä»¥é™ã§ã¯ã€`dataclasses`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã§ãã‚‹ã€‚



```python
from dataclasses import dataclass

@dataclass(frozen=True)
class ImmutablePoint:
 Â Â  x: int
 Â Â  y: int

p = ImmutablePoint(1, 2)
# p.x = 3Â  # FrozenInstanceError: cannot assign to field 'x'
```



### `types.MappingProxyType` ã‚’ä½¿ã†



è¾æ›¸ã‚’ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã«ã™ã‚‹å ´åˆã¯ï¼Œ`types.MappingProxyType`ã‚’ä½¿ã†ã€‚



```python
from types import MappingProxyType
d = {'key': 'value'}
d_proxy = MappingProxyType(d)
# d_proxy['key'] = 'new value'Â  # TypeError: 'mappingproxy' object does not support item assignment
```



### ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã™ã‚‹



ç‰¹æ®Šãƒ¡ã‚½ãƒƒãƒ‰`__setattr__`ã‚„`__delattr__`ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ã¦ã€å±æ€§ã®å¤‰æ›´ã‚’ç¦æ­¢ã™ã‚‹ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã§ãã‚‹ã€‚



```python
class ImmutableClass:
 Â Â  def __init__(self, value):
 Â Â Â Â Â Â  super().__setattr__('value', value)
 Â Â  def __setattr__(self, name, value):
 Â Â Â Â Â Â  raise AttributeError(f"Cannot modify attribute '{name}'")
 Â Â  def __delattr__(self, name):
 Â Â Â Â Â Â  raise AttributeError(f"Cannot delete attribute '{name}'")

obj = ImmutableClass(10)
# obj.value = 20Â  # AttributeError: Cannot modify attribute 'value'
# del obj.valueÂ  # AttributeError: Cannot delete attribute 'value'
```
